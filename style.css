/* ===========================
   PLANEAT - Polish v2 (Design-only)
   - 더 얇고 고급스러운 라인, 글래스/빛 번짐, 타이포 강화
   - 기능 변경 없음
   =========================== */

   @import url("https://cdn.jsdelivr.net/npm/pretendard/dist/web/static/pretendard.css");

   /* ---------- Theme Presets ---------- */
   /* 기본: Modern Beige */
   :root{
     --bg:#f6f3ef; --panel:#ffffffcc;           /* 살짝 투명 */
     --text:#1e1b18; --muted:#8c867f; --line:#e9e2d9;
     --brand:#1f1e1c; --accent:#222; --accent-2:#b27a3b; /* 금빛 포인트 */
     --chip:#f3eee7; --chip-text:#3f3a34;
   
     --radius:16px; --radius-sm:12px;
     --shadow:0 12px 30px rgba(0,0,0,.08);
     --soft:0 8px 20px rgba(0,0,0,.06);
     --blur:12px;
   
     --focus-ring:0 0 0 3px rgba(178,122,59,.18);
     --today-outline:2px solid rgba(178,122,59,.22);
   
     --now:#2b6af3; --grid:#ece6dd;
   
     /* 레오파드 포인트(토글하고 싶으면 true) */
     --leo:false;
   }
   
   /* 옵션 1: Mono Black (원하면 이 블록 내용을 :root 로 복붙)
   :root{ --bg:#0f0f0f; --panel:#161616cc; --text:#eee; --muted:#a6a6a6; --line:#272727;
     --brand:#fff; --accent:#fff; --accent-2:#caa266; --chip:#1f1f1f; --chip-text:#eee;
     --shadow:0 18px 36px rgba(0,0,0,.45); --soft:0 10px 22px rgba(0,0,0,.35);
     --today-outline:2px solid rgba(255,255,255,.16); --grid:#222; --now:#4c83ff;
   }
   */
   
   /* 옵션 2: Leopard Accent (포인트만 레오 무늬)
   :root{ --leo:true; --accent-2:#c18a4b; }
   */
   
   /* ---------- Base ---------- */
   *{ box-sizing:border-box }
   html,body{ height:100% }
   body{
     margin:0;
     font-family:"Pretendard",system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
     color:var(--text);
     background:
       radial-gradient(900px 420px at 15% -10%, rgba(178,122,59,.10), transparent 60%),
       radial-gradient(1000px 520px at 100% -10%, rgba(0,0,0,.06), transparent 60%),
       var(--bg);
   }
   
   /* 미세한 노이즈 + 글래스 느낌 */
   .calendar-container{
     max-width: 980px; margin: 64px auto; padding: 24px;
     background: var(--panel);
     border: 1px solid var(--line);
     border-radius: var(--radius);
     box-shadow: var(--shadow);
     backdrop-filter: blur(var(--blur));
   }
   
   /* ---------- Header ---------- */
   .calendar-header{
     display:flex; align-items:center; justify-content:space-between; margin-bottom:6px;
   }
   #currentMonthYear{
     margin:0; line-height:1.1; letter-spacing:-.02em;
     font-size: clamp(24px, 2.8vw, 32px); font-weight: 900;
     background: linear-gradient(90deg,var(--brand),var(--accent-2));
     -webkit-background-clip:text; background-clip:text; color:transparent;
   }
   
   /* ---------- Controls ---------- */
   .calendar-controls{ display:flex; align-items:center; gap:10px; flex-wrap:wrap; margin-top:10px }
   .calendar-controls button{
     appearance:none; border:1px solid var(--line); background:#fff;
     height:36px; padding:0 12px; border-radius:12px; font-weight:800; letter-spacing:-.01em;
     transition: transform .08s ease, box-shadow .2s ease, border-color .2s ease, background .2s ease;
   }
   .calendar-controls button:hover{ transform:translateY(-1px); box-shadow: var(--soft) }
   .calendar-controls button.active{
     background: linear-gradient(180deg, var(--accent), #000);
     color:#fff; border-color:#000;
   }
   #todayBtn{ font-weight:900 }
   #prevMonth,#nextMonth{ width:36px; padding:0; border-radius:10px }
   
   /* ---------- Search (inline) ---------- */
   .search-wrap{ margin-left:auto; display:flex; gap:8px; align-items:center }
   .search-btn{
     width:36px;height:36px;border-radius:10px;border:1px solid var(--line);background:#fff;
     display:grid; place-items:center; font-size:16px;
   }
   .search-inputbox{ position:relative }
   #searchInput{
     width:260px; height:36px; border:1px solid var(--line); border-radius:12px; padding:0 12px;
     background:#fff; outline:none; transition: box-shadow .2s, border-color .2s;
   }
   #searchInput:focus{ box-shadow:var(--focus-ring); border-color:var(--accent-2) }
   #searchPanel{
     position:absolute; left:0; right:0; top:calc(100% + 8px); display:none;
     background:#fff; border:1px solid var(--line); border-radius:14px; box-shadow:var(--shadow);
     padding:10px; max-height:320px; overflow:auto; z-index:30;
   }
   #searchPanel[aria-hidden="false"]{ display:block }
   #searchPanel .sr-item{
     display:flex; justify-content:space-between; align-items:center;
     padding:10px 12px; border:1px solid var(--line); border-radius:12px; background:#fff;
     font-weight:800; cursor:pointer; transition:transform .06s ease, background .2s;
   }
   #searchPanel .sr-item + .sr-item{ margin-top:6px }
   #searchPanel .sr-item:hover{ transform:translateY(-1px); background:#faf8f6 }
   #searchPanel .muted{ color:var(--muted) }
   
   /* ---------- Week Pager ---------- */
   #weekOptions{ display:flex; gap:8px; flex-wrap:wrap; margin:14px 0 8px }
   #weekOptions .week-item{
     padding:6px 12px; border:1px solid var(--line); border-radius:999px; background:#fff; font-weight:900;
   }
   #weekOptions .week-item.selected{ background:#000; color:#fff; border-color:#000 }
   
   /* ---------- Grid ---------- */
   #calendarGrid{
     display:grid; grid-template-columns:repeat(7,minmax(0,1fr)); gap:10px; margin-top:10px;
   }
   .day-name{ text-align:center; font-weight:900; color:var(--muted); padding:8px 0 }
   .current-month{
     position:relative; background:#fff; border:1px solid var(--line);
     border-radius:14px; min-height:128px; padding:12px; box-shadow:var(--soft); overflow:hidden;
     transition: transform .08s ease, box-shadow .2s ease, border-color .2s ease;
   }
   .current-month:hover{ transform:translateY(-1px); box-shadow:var(--shadow) }
   .current-month.today{ outline: var(--today-outline) }
   .date-number{ font-weight:900; font-size:13px; color:var(--muted) }
   
   /* 사진 오버레이 */
   .has-photo{ color:#fff }
   .day-bg-underlay,.day-bg-img{
     position:absolute; inset:0; width:100%; height:100%; object-fit:cover;
   }
   .day-bg-underlay{ transform:scale(1.05); filter:blur(2px) saturate(.9); opacity:.6 }
   .day-bg-img{ box-shadow: inset 0 0 0 1000px rgba(0,0,0,.22) }
   .current-month > *:not(img){ position:relative; z-index:1 }
   
   /* ---------- Day cell chips (2 lines) ---------- */
   .day-list{ margin-top:10px; display:flex; flex-direction:column; gap:6px }
   .dl-row{ display:flex; gap:6px; overflow:hidden }
   .dl-names{ display:flex; gap:6px; overflow:hidden }
   .dl-item{
     display:inline-flex; align-items:center; gap:6px; white-space:nowrap;
     background:var(--chip); color:var(--chip-text);
     border:1px solid var(--line); border-radius:999px; padding:4px 10px;
     font-size:12px; font-weight:900; letter-spacing:-.01em;
     transition: background .2s ease, border-color .2s ease;
   }
   .dl-item.uncat{ background:#fff }
   .dl-label.uncat-chip{ color:var(--text) }
   .dl-bar-text{ font-weight:900; }
   .dl-bar-text[data-cat="meal"]{ color:var(--accent-2) }
   .dl-bar-text[data-cat="cafe"]{ color:#6aa382 }
   
   /* 레오파드 포인트(칩에만 살짝) */
   @supports (background: paint(worklet)){
     :root[style*="--leo:true"] .dl-item:not(.uncat){
       background:
         radial-gradient(8px 6px at 10% 30%, rgba(0,0,0,.08), transparent 60%),
         radial-gradient(10px 7px at 35% 70%, rgba(0,0,0,.08), transparent 60%),
         var(--chip);
     }
   }
   
   /* ---------- Modal ---------- */
   #eventModal{ position:fixed; inset:0; display:none; place-items:center; background:rgba(0,0,0,.28); z-index:100 }
   #eventModal[aria-hidden="false"]{ display:grid }
   #eventModal .modal-content{
     width:min(900px,94vw); max-height:86vh; overflow:auto;
     background: var(--panel); border:1px solid var(--line); border-radius:18px; box-shadow:var(--shadow);
     backdrop-filter: blur(var(--blur)); padding:18px;
   }
   .close-button{
     position:sticky; top:0; margin-left:auto; width:36px; height:36px; border-radius:10px;
     border:1px solid var(--line); background:#fff; display:grid; place-items:center; cursor:pointer;
   }
   
   /* Saved(메모/투두) */
   .saved-memo-item{ position:relative; border:1px solid var(--line); border-radius:14px; background:#fff; padding:12px; margin-bottom:10px }
   .saved-memo-item img{ width:100%; height:180px; object-fit:cover; border-radius:12px; border:1px solid var(--line) }
   .saved-memo-item h5{ margin:0 0 8px 0; font-size:16px }
   .item-actions{ position:absolute; top:10px; right:10px; display:flex; gap:6px }
   .icon-btn{ width:32px; height:32px; border-radius:10px; border:1px solid var(--line); background:#fff; display:grid; place-items:center; cursor:pointer; transition:transform .08s }
   .icon-btn:hover{ transform:translateY(-1px) }
   
   .todo-time-badge{ display:inline-flex; align-items:center; gap:4px; padding:2px 8px; border:1px solid var(--line); border-radius:999px; background:#fff; font-size:12px; font-weight:900 }
   #savedTodos{ list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:8px }
   .todo-item{ border:1px solid var(--line); border-radius:12px; padding:10px; background:#fff; display:flex; gap:8px; align-items:flex-start }
   .todo-item.completed{ opacity:.55; text-decoration:line-through }
   
   .inline-editor{ display:flex; flex-direction:column; gap:10px }
   .inline-row{ display:flex; gap:10px; align-items:center }
   .inline-row.grid-2{ display:grid; grid-template-columns:1fr 240px; gap:10px }
   .input,.textarea,.btn,input[type="date"],input[type="time"]{ border:1px solid var(--line); border-radius:10px; background:#fff; color:var(--text) }
   .input{ height:36px; padding:0 10px }
   .textarea{ min-height:72px; padding:10px; resize:vertical }
   .btn{ padding:8px 12px; cursor:pointer; background:#fafafa }
   .btn.primary{ background:#000; color:#fff; border-color:#000 }
   
   .thumb-wrap{ position:relative; width:100%; min-height:120px; border:1px dashed var(--line); border-radius:12px; display:grid; place-items:center; background:#faf8f6 }
   .thumb{ width:100%; height:180px; object-fit:cover; border-radius:12px }
   .thumb-delete{ position:absolute; top:8px; right:8px; width:28px; height:28px; border-radius:50%; border:1px solid var(--line); background:#fff; cursor:pointer }
   .photo-placeholder{ display:flex; align-items:center; gap:8px; color:var(--muted) }
   .file-hidden{ display:none }
   
   /* ---------- Day Timeline ---------- */
   .dtl-wrap{ display:flex; flex-direction:column; gap:14px }
   .dtl-head{ display:flex; align-items:center; justify-content:space-between; padding:10px 12px; border:1px solid var(--line); border-radius:12px; background:#fff }
   .dtl-date{ font-weight:900; letter-spacing:-.02em }
   .dtl-body{ position:relative; border:1px solid var(--line); border-radius:14px; background:#fff; overflow:hidden }
   .dtl-grid{ display:grid; grid-template-columns:72px 1fr; position:relative }
   .dtl-hours{ display:flex; flex-direction:column; background:#faf8f6; border-right:1px solid var(--line) }
   .dtl-hour{ height:48px; display:flex; align-items:flex-start; justify-content:flex-end; padding:4px 8px; font-size:12px; color:var(--muted); border-top:1px dashed var(--grid) }
   .dtl-hour:first-child{ border-top:none }
   .dtl-slots{ position:relative; background:linear-gradient(180deg, rgba(0,0,0,0) 70%, rgba(0,0,0,.02) 100%) }
   .dtl-slot{ height:48px; border-top:1px dashed var(--grid); position:relative }
   .dtl-slot:first-child{ border-top:none }
   .now-line{ position:absolute; left:72px; right:0; height:2px; background:var(--now); box-shadow:0 0 0 1px rgba(37,99,235,.2); z-index:2 }
   .now-dot{ position:absolute; width:8px; height:8px; border-radius:50%; background:var(--now); left:68px; transform:translate(-50%,-50%); z-index:3 }
   .task{ position:absolute; left:10px; right:10px; min-height:34px; padding:6px 8px; border:1px solid var(--line); border-radius:12px; background:#f9fafb; display:flex; align-items:center; gap:8px; box-shadow:var(--soft) }
   .task .time{ font-size:12px; padding:2px 8px; border:1px solid var(--line); border-radius:999px; background:#fff; font-weight:900 }
   .task.completed{ opacity:.6; text-decoration:line-through }
   .task-non{ margin:12px; border:1px dashed var(--line); border-radius:12px; padding:10px 12px; background:#faf8f6 }
   .dtl-sec{ border:1px solid var(--line); border-radius:12px; background:#fff; padding:12px }
   .dtl-memo-list{ display:flex; flex-direction:column; gap:8px }
   .dtl-memo-item{ display:flex; gap:8px; align-items:center }
   .dtl-chip{ font-size:12px; padding:2px 8px; border:1px solid var(--line); border-radius:999px; background:#f8fafc; white-space:nowrap }
   .dtl-foot{ display:flex; justify-content:flex-end; gap:8px }
   
   /* ---------- Quick Todo Bar ---------- */
   #quickTodoBar{ display:block; margin-top:12px; background:#fff; border:1px solid var(--line); border-radius:14px; box-shadow:var(--soft); padding:12px }
   #quickTodoBar .qt-row-wrap{ display:flex; align-items:flex-start; gap:12px }
   #quickTodoBar .qt-left{ flex:1; display:flex; flex-direction:column; gap:8px; min-width:0 }
   #quickTodoBar .qt-right{ display:flex; align-items:center }
   #quickTodoBar .qt-plus{ border:1px solid var(--line); background:#fafafa; border-radius:12px; padding:8px 12px; cursor:pointer }
   #quickTodoBar .qt-row{ display:flex; align-items:center; gap:10px; padding:8px 10px; border:1px solid var(--line); border-radius:12px; background:#fff }
   #quickTodoBar .qt-bullet{ font-weight:900 }
   #quickTodoBar .qt-meta{ display:flex; gap:6px; align-items:center }
   #quickTodoBar .qt-dday{ font-weight:900; font-size:12px; padding:2px 8px; border-radius:999px; border:1px solid var(--line); background:#f8fafc }
   #quickTodoBar .qt-dday.is-today{ border-color:#d7e7ff; background:#eef6ff; color:#1e3a8a }
   #quickTodoBar .qt-date{ font-size:12px; color:var(--muted) }
   #quickTodoBar .qt-input{ flex:1; min-width:0; border:1px solid var(--line); border-radius:10px; padding:8px 10px; background:#fff }
   #quickTodoBar .qt-icons{ display:flex; gap:6px }
   #quickTodoBar .qt-icon{ border:1px solid var(--line); background:#fff; border-radius:10px; padding:6px 8px; cursor:pointer }
   .quick-todo-empty{ color:var(--muted) }
   
   /* ---------- Utils ---------- */
   .muted{ color:var(--muted) }
   .icon-svg{ width:18px; height:18px; display:block }
   .modal-open{ overflow:hidden }
   
   /* ---------- Responsive ---------- */
   @media (max-width:960px){
     .calendar-container{ margin:28px auto; padding:18px }
   }
   @media (max-width:760px){
     #searchInput{ width:200px }
     .inline-row.grid-2{ grid-template-columns:1fr }
   }
   @media (max-width:520px){
     #searchInput{ width:160px }
     #currentMonthYear{ font-size:22px }
     .current-month{ min-height:110px; padding:10px }
   }
  
   /* ====== Theme (Fall Patagonia × Polo) ====== */
:root{
  --bg: #f6f1ea;          /* 크림 */
  --panel: #ffffff;       /* 카드 */
  --ink: #1b202a;         /* 본문 텍스트 */
  --muted: #6f7783;       /* 보조 */
  --navy: #1f2f45;        /* 네이비 */
  --navy-ink: #0f1b2b;
  --accent: #c59a5b;      /* 세피아 골드 */
  --line: rgba(27,32,42,.10);
  --shadow: 0 20px 40px rgba(31,47,69,.08);
  --radius: 16px;
}

/* reset-ish */
*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0; color:var(--ink); background:var(--bg);
  font-family: ui-sans-serif, system-ui, -apple-system, "Apple SD Gothic Neo",
               "Noto Sans KR", "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
}

/* ====== Auth layout ====== */
.auth-bg{
  background:
    radial-gradient(1200px 500px at 20% -10%, rgba(197,154,91,.10), transparent),
    radial-gradient(900px 400px at 80% 110%, rgba(31,47,69,.08), transparent),
    var(--bg);
}
.auth-shell{
  min-height:100dvh; display:grid; place-items:center; padding:40px 20px;
}
.auth-card{
  width:min(720px, 92vw);
  background: var(--panel);
  border: 1px solid var(--line);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 28px 28px 22px;
}

/* ====== Brand ====== */
.auth-head{ margin-bottom: 10px; }
.brand{
  margin:0;
  font-size: 28px;
  letter-spacing: .6px;
  color: var(--navy);
}
.brand-sub{
  margin: 4px 0 0 2px;
  color: var(--muted);
  font-size: 13px;
}

/* ====== Form ====== */
.auth-form{ margin-top: 14px; }
.field{ margin: 10px 0 14px; }
.field label{
  display:block; font-size:12px; font-weight:700; color:var(--navy-ink);
  margin: 0 0 8px 4px;
  letter-spacing:.2px;
}
.field input{
  width:100%;
  height:44px;
  border:1px solid var(--line);
  background:#fffdf8;
  outline:none;
  border-radius:12px;
  padding:0 14px;
  font-size:15px;
  transition: box-shadow .2s, border-color .2s, background .2s;
}
.field input:focus{
  border-color: rgba(31,47,69,.25);
  box-shadow: 0 0 0 4px rgba(31,47,69,.08);
  background:#ffffff;
}

.actions{ margin-top: 8px; }
.w-full{ width:100%; }

.btn{
  height:44px; padding:0 14px; border-radius:12px; border:1px solid var(--line);
  background:#fff; cursor:pointer; font-weight:700;
}
.btn-primary{
  background: var(--navy);
  color:#fff; border-color: var(--navy);
}
.btn-primary:hover{ filter: brightness(1.06); }
.btn:active{ transform: translateY(0.5px); }

/* 아주 작은 링크  */
.aux-row{
  display:flex; align-items:center; gap:8px;
  justify-content:flex-end; margin-top:8px;
}
.aux-row.center{ justify-content:center; }
.sep{ color: #2a5bd7; opacity:.6; font-size:11px; margin:0 -2px; }

.tiny-link{
  font-size:11.5px;
  color:#2a5bd7;
  text-decoration:underline;
  line-height:1;
}
.tiny-link:hover{ color:#1a469f; }

/* 일반 페이지(캘린더)에서도 버튼이 회색처럼 보이지 않도록 최소 재정의 */
button, .icon-btn{
  font-family: inherit;
}

/* ── 캘린더 페이지의 기존 요소들과 충돌을 최소화하려고 범위를 좁힌 스타일만 둠 ── */
/* ========= Tokens ========= */
:root{
  /* Patagonia × Polo · Autumn */
  --bg: #F4EFE6;            /* warm paper */
  --panel: #FFFFFF;
  --ink: #2B2A28;           /* near-black */
  --muted: #6E6A63;

  --navy: #1C2A39;          /* deep navy */
  --forest: #274134;        /* pine green */
  --rust: #9C5A2C;          /* leather brown */
  --beige: #E4D9C8;         /* polo khaki */
  --sand: #F2E8D9;

  --line: rgba(24,24,24,.12);
  --shadow: 0 10px 30px rgba(28,42,57,.10);

  --radius: 14px;
}

/* ========= Base ========= */
*{ box-sizing: border-box; }
html,body{ height:100%; }
body{
  margin:0;
  color:var(--ink);
  background: radial-gradient(1200px 600px at 50% -10%, #fff 0%, var(--sand) 55%, var(--bg) 100%);
  font-family: ui-sans-serif, system-ui, -apple-system, "Pretendard", "Apple SD Gothic Neo", "Noto Sans KR", Segoe UI, Roboto, Helvetica, Arial;
  letter-spacing:.01em;
}

h1,h2,h3{ margin:0; font-weight:800; }
h4,h5{ margin:0 0 8px; }

a{ color: #1857C7; text-decoration: underline; }
button{ font: inherit; cursor: pointer; }

/* ========= App Top ========= */
.app-top{
  position: sticky; top:0; z-index:10;
  display:flex; align-items:center; justify-content:space-between;
  padding:16px 20px;
  background:rgba(255,255,255,.6); backdrop-filter: blur(10px);
  border-bottom:1px solid var(--line);
}
.top-left{ display:flex; align-items:center; gap:16px; }
.brand{ font-size:22px; letter-spacing:.02em; color:var(--navy); }
.view-tabs{ display:flex; gap:6px; }
.tab{
  border:1px solid var(--line); background:#fff;
  padding:8px 12px; border-radius:999px;
}
.tab.active{ background:var(--navy); color:#fff; border-color:var(--navy); }
.ghost{ border:1px solid var(--line); background:#fff; padding:8px 12px; border-radius:999px; }
.icon-btn{ width:36px; height:36px; border:1px solid var(--line); border-radius:10px; background:#fff; }
.month-nav{ display:flex; align-items:center; gap:8px; }

/* ========= Main ========= */
.app-main{ max-width:1100px; margin:24px auto; padding:0 16px; }

/* ========= Calendar Grid (JS writes content) ========= */
.calendar-grid{
  display:grid;
  grid-template-columns: repeat(7, minmax(0, 1fr));
  grid-auto-rows: minmax(120px, auto);
  gap:10px;
}
.day-name{
  font-weight:700; color:var(--muted);
  padding:8px 6px; text-align:center;
}
.current-month{
  position:relative; overflow:hidden;
  background:var(--panel);
  border:1px solid var(--line);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding:12px;
}
.current-month.today{
  outline:2px solid var(--forest);
}
.date-number{ font-weight:800; color:var(--navy); }

.day-bg-underlay{ position:absolute; inset:-2px; filter: grayscale(100%) contrast(.9) opacity(.08); object-fit: cover; }
.day-bg-img{ position:absolute; inset:-2px; object-fit: cover; opacity:.0; } /* 눈부심 방지: 메인 이미지는 숨김 */

.day-list{ position:relative; z-index:1; margin-top:8px; display:flex; flex-direction:column; gap:4px; }
.dl-row{ display:flex; gap:6px; overflow:hidden; }
.dl-names{ display:flex; gap:6px; flex-wrap:wrap; }
.dl-item{ display:inline-flex; align-items:center; gap:6px; padding:6px 8px; border:1px solid var(--line); border-radius:999px; background:#fff; }
.dl-item.uncat{ background: #FCFAF6; border-style:dashed; }
.dl-bar-text[data-cat="meal"]{ color: var(--rust); }
.dl-bar-text[data-cat="cafe"]{ color: #8B5CF6; }
.dl-label{ font-weight:700; font-size:12px; }

/* ========= Week Pager ========= */
.week-pager{ display:flex; gap:8px; margin:8px 0 12px; }
.week-pager .week-item{
  padding:8px 12px; border:1px solid var(--line);
  border-radius:999px; background:#fff; font-weight:700;
}
.week-pager .week-item.selected{ background:var(--navy); color:#fff; border-color:var(--navy); }

/* ========= Modal ========= */
.modal{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; background: rgba(0,0,0,.25); padding:20px; }
.modal .modal-content{
  position:relative; width:min(860px, 92vw); max-height:90vh; overflow:auto;
  background:#fff; border:1px solid var(--line); border-radius:20px; box-shadow: var(--shadow); padding:20px;
}
.close-button{
  position:absolute; top:14px; right:14px; width:36px; height:36px; border-radius:10px;
  border:1px solid var(--line); background:#fff;
}
.modal-head{ margin-bottom:8px; }
.modal-date{ font-weight:800; color:var(--navy); }

/* ========= Panel / Toggle ========= */
.panel{ margin-top:10px; }
.toggle-header{
  width:100%; text-align:left; font-weight:800; padding:10px 12px;
  border:1px solid var(--line); background:linear-gradient(#fff, #faf9f6);
  border-radius:12px; color:var(--navy);
}
.panel-body{ margin-top:10px; border:1px solid var(--line); border-radius:14px; background:#fff; padding:14px; }
.divider{ height:1px; background:var(--line); margin:14px 0; }
.subhead{ color:var(--forest); font-weight:800; margin-bottom:8px; }

/* ========= Form ========= */
.stack{ display:flex; flex-direction:column; gap:10px; }
.grid-2{ display:grid; grid-template-columns:1fr 1fr; gap:10px; }
.field label{ display:block; font-size:12px; color:var(--muted); margin-bottom:6px; }
input[type="text"], input[type="password"], input[type="time"], input[type="date"], textarea, select{
  width:100%; padding:12px 12px;
  border:1px solid var(--line); border-radius:12px; background:#fff; outline:none;
}
input:focus, textarea:focus, select:focus{
  border-color:var(--forest);
  box-shadow:0 0 0 3px rgba(39,65,52,.12);
}
textarea{ resize: vertical; }

/* chips */
.chips{ display:flex; gap:8px; flex-wrap:wrap; margin-bottom:4px; }
.chip{
  padding:8px 12px; border:1px solid var(--line); border-radius:999px; background:#fff; font-weight:700;
}
.chip.active{ background:var(--forest); color:#fff; border-color:var(--forest); }

/* row actions */
.row-end{ display:flex; gap:8px; justify-content:flex-end; }

/* buttons */
.btn{ border:1px solid var(--line); background:#fff; padding:10px 14px; border-radius:12px; }
.btn.primary{ background:var(--navy); color:#fff; border-color:var(--navy); }
.btn.ghost{ background:#fff; }

/* cards (saved memos) */
.cards{ display:flex; flex-direction:column; gap:10px; }
.saved-memo-item{
  position:relative; border:1px solid var(--line); border-radius:14px; padding:12px; background:#fff;
}
.saved-memo-item h5{ margin:0 0 6px; font-size:14px; }
.saved-memo-item img{ width:100%; max-height:180px; object-fit:cover; border-radius:12px; border:1px solid var(--line); }
.item-actions{ position:absolute; top:10px; right:10px; display:flex; gap:6px; }
.icon-btn{ width:auto; height:auto; padding:6px 10px; border:1px solid var(--line); border-radius:10px; background:#fff; }
.uncat-dot{ display:inline-block; width:6px; height:6px; border-radius:50%; background:var(--rust); margin-left:6px; }

/* inline editor (memo/todo 공통) */
.inline-editor{ display:flex; flex-direction:column; gap:8px; }
.inline-row{ display:grid; grid-template-columns:1fr 1fr; gap:8px; }
.inline-row.grid-2{ grid-template-columns:1fr 1fr; }
.inline-actions{ display:flex; gap:8px; justify-content:flex-end; }
.photo-placeholder{ display:flex; gap:6px; align-items:center; justify-content:center; height:120px; border:1px dashed var(--line); border-radius:12px; background:#FCFAF6; }
.thumb-wrap{ position:relative; }
.thumb{ display:block; width:100%; max-height:120px; object-fit:cover; border-radius:12px; border:1px solid var(--line); }
.thumb-delete{ position:absolute; top:6px; right:6px; border:1px solid var(--line); background:#fff; border-radius:999px; width:26px; height:26px; }

/* ========= Todo ========= */
.todo-inline{
  display:flex; align-items:center; gap:8px;
}
.todo-inline select,
.todo-inline input[type="time"]{
  flex:1; min-width:0;
}
.todo-list{ list-style:none; padding:0; margin:10px 0 0; display:flex; flex-direction:column; gap:8px; }
.todo-item{
  position:relative; display:flex; align-items:flex-start; gap:8px; border:1px solid var(--line);
  border-radius:12px; background:#fff; padding:10px;
}
.todo-item.completed{ opacity:.7; text-decoration: line-through; }
.todo-text{ white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.todo-time-badge{
  font-size:12px; padding:2px 6px; border:1px solid var(--line);
  border-radius:999px; background:#FCFAF6; color:var(--forest);
}

/* ========= Auth ========= */
.auth-bg{
  min-height:100vh; display:flex; align-items:center; justify-content:center;
  background: radial-gradient(1200px 600px at 50% -10%, #fff 0%, var(--sand) 55%, var(--bg) 100%);
}
.auth-shell{ width:100%; display:flex; align-items:center; justify-content:center; padding:24px; }
.auth-card{
  width:min(520px, 92vw); background:#fff; border:1px solid var(--line); border-radius:20px; box-shadow: var(--shadow); padding:22px;
}
.auth-head{ margin-bottom:14px; }
.brand-sub{ color:var(--muted); margin:6px 0 0; font-size:13px; }
.auth-form{ display:flex; flex-direction:column; gap:10px; }
.actions .w-full{ width:100%; }
.aux-row{ display:flex; gap:8px; align-items:center; }
.aux-row.tiny{ margin-top:4px; }
.tiny-link{ font-size:12px; color:#1857C7; text-decoration:underline; }
.sep{ color:var(--muted); }

/* ========= Search bar injected by JS ========= */
.calendar-controls{ display:flex; align-items:center; gap:10px; margin-bottom:10px; }

/* ========= Toast (script.js에서 사용) ========= */
.toast{
  position: fixed; left:50%; bottom:32px; transform: translateX(-50%) translateY(20px);
  background:#111; color:#fff; padding:10px 14px; border-radius:999px; opacity:0; pointer-events:none; transition:.2s ease;
}
.toast.show{ opacity:1; transform: translateX(-50%) translateY(0); }

/* === Day-cell 썸네일 강제 선명 모드 === */
.current-month.has-photo {
  position: relative;
  overflow: hidden;
}
.current-month .day-bg-underlay,
.current-month .day-bg-img {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  opacity: 1 !important;           /* ← 절대 투명해지지 않게 고정 */
  filter: none !important;          /* 흐림/밝기 필터 제거 */
  mix-blend-mode: normal !important;/* 블렌드 제거 */
  pointer-events: none;
}
/* 날짜 숫자와 칩이 가려지지 않도록 위에 올려줌 */
.current-month .date-number,
.current-month .day-list { position: relative; z-index: 2; }

.week-actions .btn {
  background: none !important;
  border: none !important;
  padding: 2px 4px !important;
  color: #555 !important;
  font-size: 13px !important;
  text-decoration: underline;
  cursor: pointer;
}
.week-actions .btn:hover {
  color: #111 !important;
}
.week-actions {
  justify-content: flex-end !important;
}

/* ===== Month view: tighter spacing ===== */
#calendarGrid.is-month {
  gap: 8px;                    /* 그리드 간격 축소 (기존 10~16px였다면 효과 큼) */
}

#calendarGrid.is-month .day-name {
  padding: 20px 0;              /* 요일 헤더 높이 ↓ */
  font-size: 12px;
  line-height: 1.1;
  margin: 0;                   /* 여백 누수 차단 */
}

#calendarGrid.is-month .current-month {
  min-height: 130px;            /* 날짜 칸 기본 높이 ↓ (필요시 76~96px 사이로 조절) */
  padding: 6px 6px 8px;        /* 내부 패딩 ↓ */
  border-radius: 12px;         /* 모서리 살짝만 */
}

#calendarGrid.is-month .date-number {
  font-size: 12px;             /* 숫자 크기 ↓ */
  line-height: 1;
  margin: 0 0 4px 0;           /* 숫자와 칩 사이 간격만 소폭 */
}

#calendarGrid.is-month .day-list {
  margin-top: 2px;             /* 칩 영역과 번호 사이 간격 ↓ */
}

#calendarGrid.is-month img.day-bg-underlay,
#calendarGrid.is-month img.day-bg-img {
  max-height: 56px;            /* 배경 이미지가 칸을 키우지 않도록 상한 */
}

/* 월 뷰 칸 사이 높이 줄이기 */
#calendarGrid.is-month {
  grid-auto-rows: minmax(20px, auto) !important; /* 기존 120~150px 정도로 잡혀있던 거 ↓ */
}

/* ===== Mini Month: 독립 미니 탭 창 ===== */
#miniMonth[aria-hidden="true"] { display: none; }
#miniMonth {
  position: fixed; inset: 0;      /* 전체 영역에 깔리지만 */
  z-index: 99999;
  pointer-events: none;           /* 바깥쪽은 클릭 막기용(창 외부 클릭 무시) */
}
#miniMonth .mm-window {
  pointer-events: auto;           /* 창 내부만 클릭 가능 */
  position: absolute;
  left: 50%; top: 14vh; transform: translateX(-50%);
  width: min(560px, 92vw);
  max-height: 72vh;
  background: #fff;
  border: 1px solid var(--line,#e9e2d9);
  border-radius: 16px;
  box-shadow: 0 18px 44px rgba(0,0,0,.14);
  display: flex; flex-direction: column;
  overflow: hidden;
}
.mm-head {
  display:flex; align-items:center; gap:8px;
  padding: 10px 12px; border-bottom:1px solid var(--line,#eee);
  background: linear-gradient(#fff, #fafafa);
}
.mm-title { flex:1; text-align:center; font-weight:800; }
.mm-prev, .mm-next, .mm-close {
  border:1px solid var(--line,#e9e2d9); background:#fff; border-radius:10px;
  padding:6px 10px; cursor:pointer;
}
.mm-close { margin-left:auto; }

.mm-body { padding: 10px 12px; overflow:auto; }
.mm-grid {
  display:grid; grid-template-columns: repeat(7, 1fr); gap:6px;
}
.mm-dow {
  text-align:center; font-size:12px; color:#6b7280; padding:4px 0;
}
.mm-pad { height: 0; }
.mm-day {
  border:1px solid #eee; background:#fff; border-radius:10px; padding:8px 0;
  cursor:pointer; font-weight:600;
}
.mm-day.is-today { outline:2px solid #dbeafe; }
.mm-day.is-selected { border-color:#111; box-shadow:0 0 0 2px #111 inset; }


/* === Photo bar: 이모지 버튼만 보이고 파일 인풋은 숨김 === */
.photo-bar{
  display:flex; align-items:center; gap:8px;
}
.photo-emoji{
  appearance:none; border:1px solid var(--line,#e9e2d9);
  background:#fff; border-radius:12px; width:40px; height:40px;
  display:grid; place-items:center; font-size:20px; cursor:pointer;
  transition:transform .06s ease, box-shadow .2s ease;
}
.photo-emoji:hover{ transform:translateY(-1px); box-shadow:var(--soft, 0 8px 20px rgba(0,0,0,.06)); }
.file-hidden{ display:none !important; }  /* ← 기본 파일 선택 UI 완전 숨김 */

/* 썸네일 삭제 버튼(이미 쓰고 있으면 생략 가능) */
.thumb-delete{
  position:absolute; top:8px; right:8px; width:28px; height:28px;
  border-radius:50%; border:1px solid var(--line,#e9e2d9); background:#fff; cursor:pointer;
}

.photo-emoji { display: none !important; }

/* 기본 파일 선택 UI 숨김 */
input[type="file"] {
  display: none !important;
}


.panel-body {
  display: none;
}

.panel-body.open {
  display: block;
}
/* === 토글 공통 === */
.toggle-content { display: none; }
.toggle-content.open { display: block; }

/* (선택) 버튼 시각 피드백 */
.toggle-header { cursor: pointer; }
.toggle-header[aria-expanded="true"]::after { content: " ▲"; }
.toggle-header[aria-expanded="false"]::after { content: " ▼"; }

/* =========================
   MZ Clean Pack (drop-in)
   - 기능 변경 없음: 스타일만 얹음
   - Pretendard 기준, 미니멀 · 라운드 · 소프트 섀도
   ========================= */
   :root{
    --mz-bg:#fafafa;
    --mz-panel:#ffffff;
    --mz-text:#222;
    --mz-muted:#7a7a7a;
    --mz-line:#ececec;
    --mz-acc:#111;           /* 포커스/프라이머리 */
    --mz-accl:#0d6;          /* 강조 하이라이트(연초록) */
    --mz-chip:#f6f6f6;       /* 칩 배경 */
    --mz-shadow:0 10px 24px rgba(0,0,0,.08);
    --mz-r:14px;             /* 라운드 */
  }
  
  /* 패널(모달 속 입력박스들) */
  .modal-content{
    border-radius: 18px !important;
    background: var(--mz-panel) !important;
    box-shadow: var(--mz-shadow);
    border: 1px solid var(--mz-line);
    overflow: hidden;
  }
  
  /* 토글 헤더 */
  .toggle-header{
    width: 100%;
    text-align: left;
    padding: 14px 16px;
    border: 1px solid var(--mz-line);
    border-radius: var(--mz-r);
    background: linear-gradient(#fff, #fbfbfb);
    font-weight: 800;
    font-size: 15px;
    color: var(--mz-text);
    transition: transform .08s ease, box-shadow .15s ease;
  }
  .toggle-header:hover{ box-shadow: 0 6px 16px rgba(0,0,0,.06); }
  .toggle-header[aria-expanded="true"]{ box-shadow: inset 0 0 0 2px #eee; }
  
  /* 토글 컨텐츠 래퍼 */
  .toggle-content{
    margin-top: 10px;
    padding: 12px;
    border: 1px dashed var(--mz-line);
    border-radius: var(--mz-r);
    background: #fff;
  }
  
  /* 폼 그리드 */
  .form-grid{
    display: grid;
    grid-template-columns: 1fr;
    gap: 10px;
  }
  @media (min-width: 780px){
    .form-grid.two{ grid-template-columns: 1fr 1fr; }
    .form-grid.three{ grid-template-columns: 1fr 1fr 1fr; }
  }
  
  /* 라벨 + 인풋 묶음 */
  .form-item{ display:flex; flex-direction:column; gap:6px; }
  .form-item label{ font-size:12px; font-weight:700; color:#666; }
  
  /* 인풋/텍스트에어리어/셀렉트 공통 */
  .input, input[type="text"], input[type="time"], input[type="date"],
  textarea, select{
    appearance: none;
    border: 1px solid var(--mz-line);
    border-radius: 12px;
    padding: 10px 12px;
    background: #fff;
    outline: none;
    transition: box-shadow .15s ease, border-color .15s ease, transform .03s ease;
    font-size: 14px;
  }
  textarea{ min-height: 84px; resize: vertical; }
  .input:focus, input:focus, textarea:focus, select:focus{
    border-color: #d0d0d0;
    box-shadow: 0 0 0 3px rgba(0,0,0,.04), 0 0 0 2px rgba(0,0,0,.02);
  }
  .input:active, input:active, textarea:active{ transform: translateY(0.5px); }
  
  /* 칩(아침/점심/저녁/카페) */
  .memo-categories{ display:flex; gap:8px; flex-wrap:wrap; }
  .memo-categories .chip{
    padding: 8px 12px;
    border-radius: 999px;
    border: 1px solid var(--mz-line);
    background: var(--mz-chip);
    font-weight: 700; font-size: 13px;
    color: #333;
    transition: transform .08s ease, box-shadow .15s ease, background .15s;
  }
  .memo-categories .chip:hover{ box-shadow: 0 6px 16px rgba(0,0,0,.06); }
  .memo-categories .chip.active{
    background: #111; color:#fff; border-color:#111;
  }
  
  /* 버튼 */
  .btn{
    border: 1px solid var(--mz-line);
    background: #fff;
    border-radius: 12px;
    padding: 10px 14px;
    font-weight: 800;
    cursor: pointer;
    transition: transform .08s ease, box-shadow .15s ease, background .15s;
  }
  .btn:hover{ box-shadow: 0 8px 18px rgba(0,0,0,.08); }
  .btn:active{ transform: translateY(0.5px); }
  .btn.primary{ background:#111; color:#fff; border-color:#111; }
  .btn.ghost{ background:#f8f8f8; }
  
  /* 아이콘 버튼(연필/휴지통/사진) */
  .icon-btn{
    display:inline-flex; align-items:center; justify-content:center;
    width:36px; height:36px; border-radius:10px;
    border:1px solid var(--mz-line); background:#fff; cursor:pointer;
    transition: transform .08s ease, box-shadow .15s ease, background .15s;
  }
  .icon-btn:hover{ box-shadow: 0 6px 16px rgba(0,0,0,.06); }
  .icon-svg{ width:18px; height:18px; }
  
  /* 사진 썸네일 선택(에디터/추가) */
  .thumb-choice{ background:#fff; }
  .thumb-choice img{ border-radius:10px; }
  .inline-editor .grid-2{ display:grid; grid-template-columns: 1fr auto; gap:10px; }
  .file-hidden{ display:none; }
  
  /* 저장 목록 카드(메모/할 일) */
  .saved-memo-item, .todo-item{
    position: relative;
    padding: 12px 12px;
    border:1px solid var(--mz-line);
    border-radius: 12px;
    background:#fff;
  }
  .saved-memo-item + .saved-memo-item,
  .todo-item + .todo-item{ margin-top: 8px; }
  .saved-memo-item h5{ margin:0 0 8px 0; font-size:15px; }
  .saved-memo-item img{
    width:100%; max-height:200px; object-fit:cover; border-radius:10px; border:1px solid #f0f0f0;
  }
  
  /* 액션 영역 오른쪽 상단 */
  .item-actions{
    position:absolute; right:10px; top:10px; display:flex; gap:6px;
  }
  
  /* 할 일 뱃지/체크 */
  .todo-time-badge{
    font-size:12px; padding:3px 8px; border-radius:999px;
    border:1px solid #e9e9e9; background:#f7f7f7;
  }
  .todo-item.completed .todo-text{ text-decoration: line-through; color:#9a9a9a; }
  
  /* 시간 선택 팝오버(인라인) */
  .time-inline{ position: relative; display:inline-flex; align-items:center; gap:6px; }
  #timePopover{
    position:absolute; left:0; top:calc(100% + 6px);
    border:1px solid var(--mz-line); border-radius:12px;
    background:#fff; box-shadow: var(--mz-shadow);
    padding:10px; z-index:9999; display:none;
  }
  #timePopover.open{ display:block; }
  
  /* 검색바/검색 결과(상단 인라인) */
  .search-wrap{ gap:10px !important; }
  #searchInput{
    border:1px solid var(--mz-line) !important;
    background:#fff !important; border-radius:12px !important;
    height:38px; padding: 0 12px;
    font-size:14px;
  }
  #searchPanel{
    border-radius:14px !important; border:1px solid var(--mz-line) !important;
  }
  
  /* 달력 셀 안 칩(무카테고리/카테고리 2줄) */
  .day-list{ display:flex; flex-direction:column; gap:4px; }
  .dl-row{ display:flex; flex-wrap:wrap; gap:6px; }
  .dl-item{
    display:inline-flex; align-items:center; gap:6px;
    padding:6px 10px; border-radius:999px;
    border:1px solid var(--mz-line); background:#fff;
    font-size:12px; font-weight:700;
  }
  .dl-item.uncat{ background:var(--mz-chip); }
  .dl-bar-text[data-cat="meal"]{ color:#111; }
  .dl-bar-text[data-cat="cafe"]{ color:#3b82f6; }
  
  /* Day 뷰 타임라인 카드 */
  .dtl-wrap{ gap:14px !important; }
  .dtl-head{ border-radius: 12px !important; }
  .task{
    border-radius: 12px !important;
    background: #f8fafc !important;
    border: 1px solid #eaeaea !important;
  }
  .now-line{ height: 2px !important; }
  
  /* 버킷리스트 패널(상단) */
  .bucket-wrap{
    border-radius: 12px !important; border:1px solid var(--mz-line) !important;
    box-shadow: var(--mz-shadow); background:#fff;
  }
  .bucket-item{ border-radius:12px; }
  .bucket-icon{ border-radius:10px; }
  
